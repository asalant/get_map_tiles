#!/usr/bin/env ruby
# frozen_string_literal: true

require "bundler/setup"
require "get_map_tiles"

# You can add fixtures and/or initialization code here to make experimenting
# with your gem easier. You can also use a different console, if you like.

# (If you use this, don't forget to add pry to your Gemfile!)
# require "pry"
# Pry.start

template = "https://heatmap-external-a.strava.com/tiles-auth/%{activity}/hot/%{z}/%{x}/%{y}.png?%{auth_params}"

auth_params = ENV['STRAVA_AUTH_PARAMS']

# Castle Peak
ne_corner = {:lat => 39.36786, :lon => -120.36380}
sw_corner = {:lat => 39.35104, :lon => -120.31298}
activity = "winter"

@fetcher = ::GetMapTiles::Fetcher.new(template, :auth_params => auth_params, :activity => activity)
@fetcher.max_zoom = 6
@fetcher.min_zoom = 6
@fetcher.download(ne_corner, sw_corner)
